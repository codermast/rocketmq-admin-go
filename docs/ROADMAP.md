<![CDATA[# RocketMQ Admin Go 开发路线图

## 项目概述

本项目是 Apache RocketMQ 运维管理接口的 Go 语言实现，目标是为 Go 开发者提供完整的 RocketMQ 运维 API，支持构建监控、管理等生态应用。

## 开发阶段

### 阶段一：基础框架 (v0.1)

**目标**：搭建项目基础框架，实现核心通信协议和 P0 优先级接口

**预计时间**：2-3 周

#### 任务清单

- [ ] **项目初始化**
  - [ ] 初始化 Go 模块
  - [ ] 配置 CI/CD（GitHub Actions）
  - [ ] 添加 LICENSE 和贡献指南

- [ ] **通信协议层**
  - [ ] 实现 RocketMQ Remoting 协议编解码
  - [ ] 实现 TCP 长连接客户端
  - [ ] 实现请求/响应模型
  - [ ] 实现连接池管理

- [ ] **核心接口实现 (P0 - 16 个)**
  - [ ] 生命周期：`Start()`, `Close()`
  - [ ] Broker：`FetchBrokerRuntimeStats()`
  - [ ] Topic：`CreateAndUpdateTopicConfig()`, `ExamineTopicStats()`, `FetchAllTopicList()`, `FetchTopicsByCluster()`, `ExamineTopicRouteInfo()`, `DeleteTopic()`
  - [ ] 消费者：`CreateAndUpdateSubscriptionGroupConfig()`, `ExamineSubscriptionGroupConfig()`, `DeleteSubscriptionGroup()`, `ExamineConsumeStats()`, `ExamineConsumerConnectionInfo()`
  - [ ] 集群：`ExamineBrokerClusterInfo()`, `GetNameServerAddressList()`
  - [ ] Offset：`ResetOffsetByTimestamp()`

- [ ] **测试与文档**
  - [ ] 单元测试覆盖率 > 60%
  - [ ] 基础示例代码
  - [ ] API 文档

---

### 阶段二：常用功能 (v0.2)

**目标**：实现 P1 优先级接口，完善错误处理和重试机制

**预计时间**：3-4 周

#### 任务清单

- [ ] **P1 接口实现 (41 个)**
  - [ ] Broker 管理扩展
  - [ ] Topic 管理扩展
  - [ ] 消费者组管理扩展
  - [ ] 生产者管理
  - [ ] NameServer 配置管理
  - [ ] 消息操作
  - [ ] Offset 管理扩展
  - [ ] ACL 权限管理（全部 10 个）

- [ ] **功能增强**
  - [ ] 连接重试机制
  - [ ] 超时配置
  - [ ] 错误码映射
  - [ ] 日志系统集成

- [ ] **测试与文档**
  - [ ] 单元测试覆盖率 > 75%
  - [ ] 集成测试
  - [ ] 完善 API 文档

---

### 阶段三：进阶功能 (v0.3)

**目标**：实现 P2 优先级接口，支持 RocketMQ 5.x 特性

**预计时间**：4-5 周

#### 任务清单

- [ ] **P2 接口实现 (46 个)**
  - [ ] Broker 容器管理
  - [ ] 静态 Topic
  - [ ] Controller 管理（RocketMQ 5.x）
  - [ ] 并发操作接口
  - [ ] ConsumeQueue 操作
  - [ ] 清理功能

- [ ] **RocketMQ 5.x 支持**
  - [ ] gRPC Proxy 协议支持
  - [ ] Controller 模式支持
  - [ ] 新版本特性适配

- [ ] **性能优化**
  - [ ] 批量操作支持
  - [ ] 并发请求优化
  - [ ] 内存使用优化

---

### 阶段四：正式发布 (v1.0)

**目标**：完成所有接口，稳定性验证，正式发布

**预计时间**：2-3 周

#### 任务清单

- [ ] **P3 接口实现 (9 个)**
  - [ ] 冷数据流控
  - [ ] RocksDB 相关
  - [ ] 定时器引擎

- [ ] **稳定性验证**
  - [ ] 长时间运行测试
  - [ ] 边界条件测试
  - [ ] 兼容性测试（RocketMQ 4.x/5.x）

- [ ] **发布准备**
  - [ ] 完整文档
  - [ ] 发布到 pkg.go.dev
  - [ ] 版本标签

---

## 技术架构

```
┌─────────────────────────────────────────────────────────────┐
│                      AdminClient API                        │
├─────────────────────────────────────────────────────────────┤
│  Cluster │ Broker │ Topic │ Consumer │ ACL │ Controller    │
├─────────────────────────────────────────────────────────────┤
│                      Request Router                         │
├─────────────────────────────────────────────────────────────┤
│               Protocol (Header/Body Codec)                  │
├─────────────────────────────────────────────────────────────┤
│                   Remoting Client                           │
│         (Connection Pool / Retry / Timeout)                 │
├─────────────────────────────────────────────────────────────┤
│                     TCP Transport                           │
└─────────────────────────────────────────────────────────────┘
```

## 关键设计决策

### 1. 协议实现

采用与 Java 客户端相同的二进制协议，确保与所有 RocketMQ 版本兼容。

### 2. 连接管理

- 支持连接池，复用连接
- 自动重连机制
- 健康检查

### 3. 错误处理

- 定义清晰的错误类型
- 支持错误码映射
- 提供详细的错误信息

### 4. 并发安全

- 所有公共 API 线程安全
- 使用读写锁保护共享状态

## 依赖项

| 依赖   | 版本     | 用途         |
| ------ | -------- | ------------ |
| 标准库 | Go 1.21+ | 基础功能     |
| -      | -        | 暂无外部依赖 |

设计原则：最小化外部依赖，使用标准库实现核心功能。

## 贡献方式

1. **领取任务**：在 Issue 中认领未分配的任务
2. **开发规范**：遵循 Go 代码规范，提交前运行 `go fmt` 和 `go vet`
3. **测试要求**：新功能需附带单元测试
4. **PR 流程**：提交 PR 后等待代码审查

## 里程碑

| 版本       | 预计发布 | 状态   |
| ---------- | -------- | ------ |
| v0.1-alpha | TBD      | 规划中 |
| v0.2-beta  | TBD      | 计划中 |
| v0.3-rc    | TBD      | 计划中 |
| v1.0       | TBD      | 计划中 |
]]>
